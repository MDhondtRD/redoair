<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui">

<h:head>
    <title>Add Flights</title>
</h:head>

<h:body>
    <ui:composition template="/resources/template/template.xhtml">
        <ui:define name="content">
            <div class="jumbotron">
                <div class="container" style="text-align: left">
                    <div class="row" style="text-align: center">
                        <div class="col-md-12">
                            <h:outputText value="Add a new flight" style="font-size: 30px; font-weight: bold"/>
                        </div>
                    </div>
                    <div class="row" style="min-height: 20px;"></div>
                    <h:form>
                        <div class="row">
                            <div class="col-md-1"><h:outputText value="Departure"
                                                                style="text-decoration: underline; font-weight: bold; font-size: larger"/>
                            </div>
                            <div class="col-md-11"></div>
                        </div>
                        <div class="row" style="min-height: 50px">
                            <div class="col-md-1"></div>
                            <div class="col-md-1" style="text-align: right"><h:outputText value="Country:"/></div>
                            <div class="col-md-10">
                                <h:selectOneMenu id="depCountry" value="#{addFlightsController.departureCountry}"
                                                 style="width: 500px;">
                                    <f:selectItems value="#{addFlightsController.allCountries}"/>
                                    <f:ajax render="depCity" execute="@this" event="change"/>
                                </h:selectOneMenu>
                            </div>
                        </div>
                        <div class="row" style="min-height: 50px">
                            <div class="col-md-1"></div>
                            <div class="col-md-1" style="text-align: right"><h:outputText value="City:"/></div>
                            <div class="col-md-10">
                                <h:selectOneMenu id="depCity" value="#{addFlightsController.departureCity}"
                                                 style="width: 500px;">
                                    <f:selectItems value="#{addFlightsController.allDepartureCities}"/>
                                    <f:ajax render="depAirport" execute="@this"/>
                                </h:selectOneMenu>
                            </div>
                        </div>
                        <div class="row" style="min-height: 50px">
                            <div class="col-md-1"></div>
                            <div class="col-md-1" style="text-align: right"><h:outputText value="Airport:"/></div>
                            <div class="col-md-10">
                                <h:selectOneMenu id="depAirport" value="#{addFlightsController.departureAirport}"
                                                 style="width: 500px;">
                                    <f:selectItems value="#{addFlightsController.allDepartureAirports}"
                                                   var="airport" itemLabel="#{airportOut.name}"
                                                   itemValue="#{airportOut}"/>
                                    <f:converter binding="#{airportConverter}"/>
                                </h:selectOneMenu>
                            </div>
                        </div>
                        <div class="row" style="min-height: 20px;"></div>

                        <div class="row">
                            <div class="col-md-1"><h:outputText value="Destination"
                                                                style="text-decoration: underline; font-weight: bold; font-size: larger"/>
                            </div>
                            <div class="col-md-11"></div>
                        </div>
                        <div class="row" style="min-height: 50px">
                            <div class="col-md-1"></div>
                            <div class="col-md-1" style="text-align: right"><h:outputText value="Country:"/></div>
                            <div class="col-md-10">
                                <h:selectOneMenu id="destCountry" value="#{addFlightsController.destinationCountry}"
                                                 style="width: 500px;">
                                    <f:selectItems value="#{addFlightsController.allCountries}"/>
                                    <f:ajax render="destCity" execute="@this"/>
                                </h:selectOneMenu>
                            </div>
                        </div>
                        <div class="row" style="min-height: 50px">
                            <div class="col-md-1"></div>
                            <div class="col-md-1" style="text-align: right"><h:outputText value="City:"/></div>
                            <div class="col-md-10">
                                <h:selectOneMenu id="destCity" value="#{addFlightsController.destinationCity}"
                                                 style="width: 500px;">
                                    <f:selectItems value="#{addFlightsController.allDestinationCities}"/>
                                    <f:ajax render="destAirport" execute="@this"/>
                                </h:selectOneMenu>
                            </div>
                        </div>
                        <div class="row" style="min-height: 50px">
                            <div class="col-md-1"></div>
                            <div class="col-md-1" style="text-align: right"><h:outputText value="Airport:"/></div>
                            <div class="col-md-10">
                                <h:selectOneMenu id="destAirport" value="#{addFlightsController.destinationAirport}"
                                                 style="width: 500px;">
                                    <f:selectItems value="#{addFlightsController.allDestinationAirports}"
                                                   var="airportReturn" itemLabel="#{airportReturn.name}"
                                                   itemValue="#{airportReturn}"/>
                                    <f:converter binding="#{airportConverter}"/>
                                </h:selectOneMenu>
                            </div>
                        </div>

                        <h:outputLabel value="Departure date and time:"/>
                        <h:inputText id="departure" value="#{addFlightsController.departure}">
                            <f:convertDateTime pattern="dd-MM-yyyy HH:mm"/>
                        </h:inputText>

                        <h:outputLabel value="Available seats:"/>
                        <h:inputText id="seats" value="#{addFlightsController.availableSeats}"/>

                        <h:outputLabel value="Price per flight:"/>
                        <h:inputText id="price" value="#{addFlightsController.price}"/>

                        <h:commandButton value="Add flight" action="#{addFlightsController.addNewFlight}"/>

                    </h:form>
                </div>
            </div>


        </ui:define>
    </ui:composition>

</h:body>

</html>